name: Test action

on: push

permissions: {}

concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
  cancel-in-progress: true

jobs:
  test-default:
    name: Test action with default settings
    runs-on: ubuntu-24.04
    steps:
      - uses: hastd/free-disk-space@main # zizmor: ignore[unpinned-uses]

  test-exclude:
    name: Test action with paths excluded
    runs-on: ubuntu-24.04
    steps:
      - uses: hastd/free-disk-space@main # zizmor: ignore[unpinned-uses]
        with:
          exclude: |
            /usr/local/lib/android
            /usr/local/share/powershell

      - name: Check exclude worked
        run: |
          [ -d /usr/local/lib/android ] && [ -d /usr/local/share/powershell ]
